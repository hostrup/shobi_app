<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>OpenUI5 Prototype - JSP Plan</title>

    <script
        id="sap-ui-bootstrap"
        src="https://openui5.hana.ondemand.com/resources/sap-ui-core.js"
        data-sap-ui-theme="sap_horizon"
        data-sap-ui-libs="sap.m, sap.ui.core"
        data-sap-ui-compatVersion="edge"
        data-sap-ui-async="true">
    </script>

    <script>
        sap.ui.getCore().attachInit(function () {
            "use strict";

            sap.ui.require([
                "sap/ui/model/json/JSONModel",
                "sap/m/Page",
                "sap/m/FlexBox",
                "sap/m/Panel",
                "sap/m/Toolbar",
                "sap/m/VBox",
                "sap/m/HBox",
                "sap/m/Title",
                "sap/m/Text",
                "sap/m/ToolbarSpacer",
                "sap/m/ObjectStatus",
                "sap/m/List",
                "sap/m/CustomListItem",
                "sap/m/Label",
                "sap/ui/core/Icon",
                "sap/ui/core/HTML",
                "sap/m/GenericTag"
            ], function (JSONModel, Page, FlexBox, Panel, Toolbar, VBox, HBox, Title, Text, ToolbarSpacer, ObjectStatus, List, CustomListItem, Label, Icon, HTML, GenericTag) {

                // 1. Define Data Model
                var oPlanData = {
                    straekninger: [
                        { fra: "Næstved", til: "Nykøbing F Vest", stationer: [{ navn: "Lundby" }, { navn: "Vordingborg" }], mellemStationer: [{ fra: "Lundby", til: "Masnedø" }] },
                        { fra: "Vigerslev", til: "Ringsted", stationer: [], mellemStationer: [{ fra: "Vigerslev", til: "Jersie Fjern" }, { fra: "Jersie Fjern", til: "Køge" }, { fra: "Lellinge", til: "Bjæverskov" }] },
                        { fra: "Ålborg", til: "Frederikshavn", stationer: [{ navn: "Aalborg" }, { navn: "Lindholm" }, { navn: "Brønderslev" }, { navn: "Vrå" }, { navn: "Hjørring" }, { navn: "Sindbjerg" }, { navn: "Tolne" }, { navn: "Kvissel" }, { navn: "Frederikshavn" }], mellemStationer: [] },
                        { fra: "Roskilde", til: "Næstved", stationer: [], mellemStationer: [] }
                    ]
                };
                var oModel = new JSONModel(oPlanData);

                // 2. Create the UI Controls Programmatically
                var oPage = new Page({
                    showHeader: false,
                    content: [
                        new FlexBox({
                            height: "100vh",
                            width: "100%",
                            alignItems: "Center",
                            justifyContent: "Center",
                            items: [
                                new Panel({
                                    width: "80rem",
                                    headerToolbar: new Toolbar({
                                        content: [
                                            new VBox({
                                                items: [
                                                    new Title({ text: "Jernbanearbejde ved bro", level: "H1" }),
                                                    new Text({ text: "2025-00002-002" }).addStyleClass("sapUiTinyMarginTop")
                                                ]
                                            }),
                                            new ToolbarSpacer(),
                                            new HBox({
                                                items: [
                                                    new ObjectStatus({ title: "Status", text: "Godkendt", state: "Success" }).addStyleClass("sapUiSmallMarginEnd"),
                                                    new ObjectStatus({ title: "Gyldig fra", text: "01.07.2025", state: "None", icon: "sap-icon://calendar" })
                                                ]
                                            })
                                        ]
                                    }),
                                    content: [ 
                                        new List({
                                            id: "straekningList",
                                            noDataText: "Ingen strækninger tilføjet",
                                            items: {
                                                path: "/straekninger",
                                                template: new CustomListItem({
                                                    content: new VBox({
                                                        items: [
                                                            new HBox({
                                                                alignItems: "Center",
                                                                items: [
                                                                    new Label({ text: "Strækning", design: "Bold" }).addStyleClass("sapUiTinyMarginEnd"),
                                                                    new Text({ text: "{fra}" }).addStyleClass("sapMTitle"),
                                                                    new Icon({ src: "sap-icon://arrow-right" }).addStyleClass("sapUiTinyMarginBeginEnd"),
                                                                    new Text({ text: "{til}" }).addStyleClass("sapMTitle")
                                                                ]
                                                            }).addStyleClass("sapUiSmallMarginBegin sapUiTinyMarginTopBottom"),
                                                            new HTML({ content: '<hr style="border: 0; border-top: 1px dashed #d9d9d9; margin: 0.5rem 0;" />' }),
                                                            new VBox({
                                                                items: [
                                                                    new VBox({
                                                                        visible: "{= ${stationer}.length > 0 }",
                                                                        items: [
                                                                            new Label({ text: "Stationer", design: "Bold" }).addStyleClass("sapUiTinyMarginBottom"),
                                                                            new FlexBox({
                                                                                wrap: "Wrap",
                                                                                items: {
                                                                                    path: "stationer",
                                                                                    template: new GenericTag({ text: "{navn}" }).addStyleClass("sapUiTinyMargin"),
                                                                                    templateShareable: false
                                                                                }
                                                                            })
                                                                        ]
                                                                    }),
                                                                    new VBox({
                                                                        visible: "{= ${mellemStationer}.length > 0 }",
                                                                        items: [
                                                                            new Label({ text: "Mellem Stationer", design: "Bold" }).addStyleClass("sapUiTinyMarginBottom"),
                                                                            new VBox({
                                                                                items: {
                                                                                    path: "mellemStationer",
                                                                                    template: new Panel({
                                                                                        backgroundDesign: "Transparent",
                                                                                        content: [
                                                                                            new HBox({
                                                                                                alignItems: "Center",
                                                                                                items: [
                                                                                                    new Text({ text: "{fra}" }),
                                                                                                    new HTML({ content: '<div style="flex-grow: 1; border-bottom: 1px dashed #888; margin: 0 0.5rem;"></div>' }),
                                                                                                    new Text({ text: "{til}" })
                                                                                                ]
                                                                                            })
                                                                                        ]
                                                                                    }).addStyleClass("sapUiNoContentPadding"),
                                                                                    templateShareable: false
                                                                                }
                                                                            })
                                                                        ]
                                                                    }).addStyleClass("sapUiSmallMarginTop"),
                                                                    new Text({
                                                                        text: "Ingen stationer eller mellem stationer valgt.",
                                                                        visible: "{= !${stationer}.length && !${mellemStationer}.length }"
                                                                    }).addStyleClass("sapUiItalicElement")
                                                                ]
                                                            }).addStyleClass("sapUiSmallMarginBegin sapUiSmallMarginBottom")
                                                        ]
                                                    }).addStyleClass("sapUiSmallMargin sapBackgroundColorNeutral")
                                                }),
                                                templateShareable: false
                                            }
                                        })
                                    ]
                                }).addStyleClass("sapUiMediumMargin")
                            ]
                        })
                    ]
                });

                // 3. Set the model on the page and place it on the screen
                oPage.setModel(oModel);
                oPage.placeAt("content");

            });
        });
    </script>
</head>
<body class="sapUiBody" id="content">
</body>
</html>

