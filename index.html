<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interaktiv Parfume Oversigt</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .table-wrapper { overflow-x: auto; }
        th, td { white-space: normal; word-wrap: break-word; }
        td:nth-child(4), td:nth-child(6) { min-width: 250px; } /* Plads til beskrivelse/noter */
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <div class="bg-white rounded-xl shadow-lg p-6 md:p-8">
            <div class="text-center mb-8">
                <h1 class="text-3xl md:text-4xl font-bold text-gray-900">Interaktiv Parfume Oversigt</h1>
                <p class="text-gray-600 mt-2">Søg efter mærke, duft, kategori eller noter.</p>
            </div>
            
            <input type="text" id="searchInput" placeholder="Søg her..." class="w-full px-4 py-3 mb-6 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition">
            
            <div class="table-wrapper border border-gray-200 rounded-lg">
                <table id="perfumeTable" class="w-full text-sm text-left text-gray-700">
                    <thead class="bg-gray-800 text-gray-100 text-xs uppercase">
                        <tr>
                            <th class="px-6 py-3">Mærke</th>
                            <th class="px-6 py-3">Kategori</th>
                            <th class="px-6 py-3">Inspireret Af</th>
                            <th class="px-6 py-3">Beskrivelse</th>
                            <th class="px-6 py-3">Dufttype</th>
                            <th class="px-6 py-3">Noter</th>
                            <th class="px-6 py-3">Links</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y">
                        <!-- Indhold loades fra perfumes.json -->
                    </tbody>
                </table>
            </div>
             <div id="no-results" class="text-center py-12 text-gray-500 hidden">
                <p class="text-xl font-semibold">Ingen resultater fundet</p>
                <p class="mt-2">Prøv at justere din søgning.</p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const tableBody = document.querySelector('#perfumeTable tbody');
            const searchInput = document.getElementById('searchInput');
            const noResultsDiv = document.getElementById('no-results');
            let allPerfumeData = [];

            // Funktion til at hente data fra JSON-fil
            async function loadPerfumeData() {
                try {
                    const response = await fetch('perfumes.json');
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    allPerfumeData = await response.json();
                    populateTable(allPerfumeData);
                } catch (error) {
                    console.error("Kunne ikke indlæse parfumedata:", error);
                    tableBody.innerHTML = `<tr><td colspan="7" class="text-center text-red-500 p-6">Fejl: Kunne ikke indlæse data fra perfumes.json. Sørg for, at filen er i samme mappe.</td></tr>`;
                }
            }

            function populateTable(data) {
                tableBody.innerHTML = '';
                noResultsDiv.classList.toggle('hidden', data.length > 0);

                data.forEach(p => {
                    const row = document.createElement('tr');
                    row.className = 'bg-white even:bg-gray-50 hover:bg-blue-50 transition-colors duration-200';
                    row.innerHTML = `
                        <td class="px-6 py-4 font-medium text-gray-900">${p.brand}</td>
                        <td class="px-6 py-4">${p.category}</td>
                        <td class="px-6 py-4 font-semibold">${p.inspiredBy}</td>
                        <td class="px-6 py-4 text-gray-600">${p.description}</td>
                        <td class="px-6 py-4">${p.scentType}</td>
                        <td class="px-6 py-4 text-xs">${p.notes}</td>
                        <td class="px-6 py-4">
                            <div class="flex flex-col space-y-2">
                                <a href="https://leparfum.com.gr/en/module/iqitsearch/searchiqit?s=${p.code}" target="_blank" class="text-center px-3 py-1.5 bg-blue-600 text-white text-xs font-semibold rounded-md hover:bg-blue-700 transition">Køb</a>
                                <a href="${p.fragrantica}" target="_blank" class="text-center px-3 py-1.5 bg-purple-600 text-white text-xs font-semibold rounded-md hover:bg-purple-700 transition">Fragrantica</a>
                            </div>
                        </td>
                    `;
                    tableBody.appendChild(row);
                });
            }

            function filterTable() {
                const searchTerm = searchInput.value.toLowerCase();
                const filteredData = allPerfumeData.filter(p => 
                    `${p.brand} ${p.category} ${p.inspiredBy} ${p.scentType} ${p.notes.replace(/<[^>]*>/g, '')}`
                    .toLowerCase()
                    .includes(searchTerm)
                );
                populateTable(filteredData);
            }

            searchInput.addEventListener('input', filterTable);
            
            // Start processen ved at hente dataene
            loadPerfumeData();
        });
    </script>
</body>
</html>
